---
title: 行や列の追加と削除
free: true
---
サンプルデータ

| |A|B|C|
|---|---|---|---|
|a|1|5|9|
|b|2|6|10|
|c|3|7|11|
|d|4|8|12|
=df

## 列の追加
`D`列を追加
```python
df['D'] = [13, 14, 15, 16]

df
```

| |A|B|C|D|
|---|---|---|---|---|
|a|1|5|9|13|
|b|2|6|10|14|
|c|3|7|11|15|
|d|4|8|12|16|
assinメソッドで追加することもできます。
```python
df = df.assign(E=[17, 18, 19, 20])

df
```

|     | A   | B   | C   | D   | E   |
| --- | --- | --- | --- | --- | --- |
| a   | 1   | 5   | 9   | 13  | 17  |
| b   | 2   | 6   | 10  | 14  | 18  |
| c   | 3   | 7   | 11  | 15  | 19  |
| d   | 4   | 8   | 12  | 16  | 20  |

### 任意の位置に列を挿入する方法
insertメソッドを使用します。引数は
- 挿入位置
- 列名
- 値
```python
df.insert(2, 'X', [21, 22, 23, 24])

df
```

|     | A   | B   | X   | C   | D   | E   |
| --- | --- | --- | --- | --- | --- | --- |
| a   | 1   | 5   | 21  | 9   | 13  | 17  |
| b   | 2   | 6   | 22  | 10  | 14  | 18  |
| c   | 3   | 7   | 23  | 11  | 15  | 19  |
| d   | 4   | 8   | 24  | 12  | 16  | 20  |

## 行を追加
locに存在しない行名を指定して追加します。
```python
df.loc['e'] = [25, 26, 27, 28, 29, 30]

df
```

|     | A   | B   | X   | C   | D   | E   |
| --- | --- | --- | --- | --- | --- | --- |
| a   | 1   | 5   | 21  | 9   | 13  | 17  |
| b   | 2   | 6   | 22  | 10  | 14  | 18  |
| c   | 3   | 7   | 23  | 11  | 15  | 19  |
| d   | 4   | 8   | 24  | 12  | 16  | 20  |
| e   | 25  | 26  | 27  | 28  | 29  | 30  |

他にも1行のDataFrameを作成して,pd.[concat](books/Pandas&Plotly/chap_2_3_DataFrame同士の結合.md#行方向の結合) で連結する方法があります。


## 行の削除

df.drop関数を指定します。
```python
df = df.drop('c')

df
```

| |A|B|X|C|D|E|
|---|---|---|---|---|---|---|
|a|1|5|21|9|13|17|
|b|2|6|22|10|14|18|
|d|4|8|24|12|16|20|
|e|25|26|27|28|29|30|

行番号を指定したい場合は、df.index属性を活用します。
index属性は行番号を与えることで該当する行のインスタンスが得られるので、
そのインスタンスを使って dropします。
```python
df = df.drop(df.index[[1, 3]])

df
```

|     | A   | B   | X   | C   | D   | E   |
| --- | --- | --- | --- | --- | --- | --- |
| a   | 1   | 5   | 21  | 9   | 13  | 17  |
| d   | 4   | 8   | 24  | 12  | 16  | 20  |

## 列の削除
dropを指定し axis=1を与える
```python
df = df.drop(['B', 'C'], axis=1)

df
```

| |A|X|D|E|
|---|---|---|---|---|
|a|1|21|13|17|
|d|4|24|16|20|

列番号を指定したい場合は、df.columns属性を活用します。
```python
df = df.drop(df. columns[2], axis=1)

df
```

| |A|X|E|
|---|---|---|---|
|a|1|21|17|
|d|4|24|20|


#
---
## sample code
> [section_2_4.ipynb](books/Pandas&Plotly/src/notebook/section_2_4.ipynb)

